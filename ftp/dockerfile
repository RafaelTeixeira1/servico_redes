FROM ubuntu:20.04
RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y vsftpd openssl
COPY vsftpd.conf /etc/vsftpd.conf
RUN mkdir -p /etc/ssl/private \
    && openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
       -keyout /etc/ssl/private/vsftpd.key \
       -out /etc/ssl/private/vsftpd.crt \
       -subj "/C=BR/ST=SP/L=Sao Paulo/O=Empresa/OU=TI/CN=empresa.local"
EXPOSE 20 21 990
CMD ["/usr/sbin/vsftpd", "/etc/vsftpd.conf"]

